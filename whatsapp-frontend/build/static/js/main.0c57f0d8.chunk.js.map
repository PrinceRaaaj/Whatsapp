{"version":3,"sources":["SidebarChat.js","axios.js","Sidebar.js","Chat.js","App.js","index.js"],"names":["SidebarChat","id","room","useState","seed","setSeed","useEffect","Math","floor","random","to","className","Avatar","src","roomName","instance","axios","create","baseURL","Sidebar","rooms","setRooms","get","then","response","data","channel","Pusher","cluster","subscribe","bind","unbind_all","unsubscribe","IconButton","type","placeholder","onClick","prompt","post","map","key","_id","Chat","name","input","setInput","messages","setMessages","setRoomName","lastSeen","setLastSeen","roomId","useParams","SearchOutlined","AttachFile","message","timeStamp","value","onChange","e","target","event","dateTime","Date","toLocaleString","preventDefault","App","userLoggedIn","setUserLoggedIn","setName","mobileNo","setMobileNo","path","required","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0c57f0d8.chunk.js","sourcesContent":["import { Avatar } from \"@material-ui/core\";\r\nimport React, {useState, useEffect} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport \"./SidebarChat.css\";\r\n\r\nexport default function SidebarChat({id, room}){\r\n\r\n    const [seed, setSeed] = useState(\"\");\r\n\r\n    useEffect(()=>{\r\n        setSeed(Math.floor(Math.random()*100));\r\n    }, []);\r\n\r\n    return (\r\n        <Link to={`/rooms/${id}`}>\r\n            <div className=\"sidebarChat\">\r\n                <Avatar src={`https://avatars.dicebear.com/api/avataaars/${seed}.svg`} />\r\n                <div className=\"sidebarChat__info\">\r\n                    <h2>{room.roomName}</h2>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    );\r\n}","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"http://localhost:9000\"\r\n});\r\n\r\nexport default instance;"," import React, {useState, useEffect} from \"react\";\r\n import {Avatar, IconButton} from \"@material-ui/core\";\r\n import MoreVertIcon from '@material-ui/icons/MoreVert';\r\n import DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\n import ChatIcon from '@material-ui/icons/Chat';\r\n import SearchIcon from '@material-ui/icons/Search';\r\n import \"./Sidebar.css\";\r\n import Pusher from \"pusher-js\";\r\n import SidebarChat from \"./SidebarChat\";\r\n import axios from \"./axios\";\r\n\r\n//  import db from \"./firebase.js\";\r\n\r\n export default function Sidebar(){\r\n\r\n    const [rooms, setRooms] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        axios.get(\"/rooms/get\").then(response => {\r\n            setRooms(response.data);\r\n          });\r\n    }, []);\r\n    \r\n    useEffect(()=>{\r\n        const pusher = new Pusher(\"16c74566fc8f85841108\", {\r\n            cluster: \"ap2\"\r\n        });\r\n        const channel = pusher.subscribe(\"rooms\");\r\n        channel.bind(\"inserted\", function(data) {\r\n            setRooms([...rooms, data]);\r\n        });\r\n        return ()=>{\r\n            channel.unbind_all();\r\n            channel.unsubscribe();\r\n        }\r\n    }, [rooms]);\r\n\r\n    const createChat=()=>{\r\n        const roomName = prompt(\"Please Enter name for Chat\");\r\n        axios.post(\"/rooms/create\", {roomName : roomName});\r\n    }\r\n\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <div className=\"sidebar__header\">\r\n                <IconButton><Avatar /></IconButton>\r\n                <div className=\"sidebar__headerRight\">\r\n                    <IconButton><DonutLargeIcon /></IconButton>\r\n                    <IconButton><ChatIcon /></IconButton>\r\n                    <IconButton><MoreVertIcon /></IconButton>\r\n                </div>\r\n            </div>\r\n            <div className=\"sidebar__search\">\r\n                <div className=\"sidebar__searchContainer\">\r\n                <SearchIcon />\r\n                <input type=\"text\" placeholder=\"Search or Start a new chat\"></input>\r\n                </div>\r\n            </div>\r\n            <div className=\"sidebar__chats\">\r\n                <div onClick={createChat} className=\"sidebarChat\">\r\n                    <h2 >Add New Chat</h2>\r\n                </div>\r\n                {rooms.map(room=>(\r\n                    <SidebarChat key={room._id} id={room._id} room={room} />\r\n                ))}\r\n\r\n            </div> \r\n        </div>\r\n     );\r\n} ","import React, {useState, useEffect} from \"react\";\r\nimport {Avatar, IconButton} from \"@material-ui/core\";\r\nimport {SearchOutlined, AttachFile, MoreVert} from \"@material-ui/icons\";\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport {useParams} from \"react-router-dom\";\r\nimport \"./Chat.css\";\r\nimport axios from \"./axios\";\r\nimport Pusher from \"pusher-js\";\r\n\r\n\r\nexport default function Chat({name}){\r\n\r\n    const [input, setInput] = useState(\"\");\r\n    const [seed, setSeed] = useState(\"\");\r\n    const [messages, setMessages] = useState([]);\r\n    const [roomName, setRoomName] = useState(\"\");\r\n    const [lastSeen, setLastSeen] = useState(\"\");\r\n    const {roomId} = useParams();\r\n\r\n    useEffect(()=>{\r\n        axios.get(`/rooms/${roomId}/get`).then(response=>{\r\n            setRoomName(response.data.roomName);\r\n            setMessages(response.data.messages);\r\n        })\r\n    }, [roomId])\r\n\r\n    useEffect(()=>{\r\n        const pusher = new Pusher(\"16c74566fc8f85841108\", {\r\n          cluster: \"ap2\"\r\n        });\r\n        const channel = pusher.subscribe(\"rooms\");\r\n        channel.bind(\"updated\", function(data) {\r\n          setMessages([...messages, data]);\r\n\r\n        });\r\n        return ()=>{\r\n            channel.unbind_all();\r\n            channel.unsubscribe();\r\n        }\r\n    }, [messages]);\r\n\r\n    useEffect(()=>{\r\n        setSeed(Math.floor(Math.random()*1000));\r\n    }, []);\r\n    \r\n    function sendMessage(event){\r\n        const dateTime = new Date().toLocaleString();\r\n        axios.post(`/rooms/${roomId}/newMessage`, {\r\n            name: name,\r\n            message: input,\r\n            timeStamp: dateTime\r\n        });\r\n        event.preventDefault();\r\n        setLastSeen(dateTime);\r\n        setInput(\"\");\r\n    }\r\n\r\n    return(\r\n        <div className=\"chat\">\r\n            <div className=\"chat__header\">\r\n                <Avatar src={`https://avatars.dicebear.com/api/avataaars/${seed}.svg`}/>\r\n                <div className=\"chat__headerInfo\">\r\n                    <h3>{roomName}</h3>\r\n                    <p>{lastSeen}</p>\r\n                </div>\r\n                <div className=\"chat__headerRight\">\r\n                    <IconButton><SearchOutlined /></IconButton>\r\n                    <IconButton><AttachFile /></IconButton>\r\n                    <IconButton><MoreVert /></IconButton>\r\n                </div>\r\n            </div>\r\n            <div className=\"chat__body\">\r\n                {/* <div className={`chat__message ${true && \"chat__receiver\"}`}>\r\n                    <span className=\"chat__name\">\r\n                        Random Name\r\n                    </span>\r\n                    Hey guys , whatsUp..!\r\n                    <span className=\"chat__timestamp\">\r\n                        2:30 PM\r\n                    </span>\r\n                </div> */}\r\n                {messages.map(message=>{\r\n                    return  <div className={`chat__message ${name===message.name && \"chat__receiver\"}`} key={message._id}>\r\n                                <span className=\"chat__name\">\r\n                                    {message.name}\r\n                                </span>\r\n                                    {message.message}\r\n                                <span className=\"chat__timestamp\">\r\n                                    {message.timeStamp}\r\n                                </span>\r\n                            </div>\r\n                })}\r\n                \r\n            </div>\r\n            <div className=\"chat__footer\">\r\n                <InsertEmoticonIcon />\r\n                <form>\r\n                    <input type=\"text\" placeholder=\"Type a message\" value={input} onChange={e=>setInput(e.target.value)}></input>\r\n                    <button onClick={sendMessage} type=\"submit\">Submit</button>\r\n                </form>\r\n                <MicIcon />\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useState} from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport Chat from \"./Chat\";\n\n\nfunction App() {\n\n  const [userLoggedIn, setUserLoggedIn] = useState();\n  const [name, setName] = useState(\"\");\n  const [mobileNo, setMobileNo] = useState(\"\");\n  \n  function submit(e){\n    if(name!==\"\" && mobileNo!==\"\"){\n      setUserLoggedIn(true);\n    } else {\n      setUserLoggedIn(false);\n    }\n  }\n\n  return (\n    <div className=\"app\">\n      { !userLoggedIn\n        ?\n        <div className=\"app__login\">\n          <img className=\"app__img\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/766px-WhatsApp.svg.png\"></img>\n          <h1>Sign into Whatsapp</h1>\n          <form>\n            <input type=\"text\" placeholder=\"Enter Full Name\" value={name} onChange={e=>setName(e.target.value)} required></input>\n            <input type=\"text\" placeholder=\"Enter Mobile Number\" value={mobileNo} onChange={e=>setMobileNo(e.target.value)} required></input>\n            <button onClick={submit}>Login</button>\n          </form>\n        </div>\n        :\n        <div className=\"app__body\">\n        <Router>\n          <Sidebar/>\n          <Switch>\n            <Route path=\"/rooms/:roomId/\">\n              <Chat name={name}/>\n            </Route>\n            <Route path=\"/\">\n              {/* <Chat /> */}\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n      }\n      \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}